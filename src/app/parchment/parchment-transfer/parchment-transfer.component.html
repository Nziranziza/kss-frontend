<div class="row">
  <div class="col-xs-12">
    <h3>
      Transfer parchment
    </h3>
  </div>
</div>
<hr>
<section>
  <div class="row" style="padding-left: 5px; margin-bottom: 15px">
    <div class="col-sm-4">
      <div class="row">
        <div class="col-sm-6">
          Remaining Qty
        </div>
        <div class="col-sm-6">
          <strong>{{ parchment.remainingQty }} Kg</strong><br>
        </div>
        <div class="col-sm-6">
          Initial Qty
        </div>
        <div class="col-sm-6">
          {{ parchment.totalKgs }} Kg<br>
        </div>
        <div class="col-sm-6">
          Lot number
        </div>
        <div class="col-sm-6">
          {{ parchment.lotNumber }}<br>
        </div>
      </div>
    </div>
  </div>
</section>
<app-list-message [message]="message"></app-list-message>
<app-list-errors [errorList]="errors"></app-list-errors>
<form [formGroup]="transferLotsForm" (ngSubmit)="onTransferLots()">
  <div class="box">
    <div class="box-body">
      <div class="row">
        <div class="col-xs-6">
          <div class="form-group">
            <label class="control-label label-required">Qty</label>
            <input type="number" formControlName="totalKgs" class="form-control" min="0"
                   max="{{ parchment.remainingQty }}">
          </div>
        </div>
        <div class="col-xs-6">
          <div class="form-group">
            <label class="control-label">Destination</label> &nbsp; &nbsp;
            <select class="form-control" formControlName="destOrgId">
              <ng-container *ngFor="let organisation of organisations">
                <option *ngIf="organisation.organizationRole.includes(2)" value="{{organisation._id}}"> {{
                  organisation.organizationName }}
                </option>
              </ng-container>
            </select>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="form-group">
            <label class="control-label">Release date</label> &nbsp; &nbsp;
            <input [owlDateTimeTrigger]="dt3" [owlDateTime]="dt3" formControlName="releaseDate" class="form-control">
            <owl-date-time [pickerType]="'calendar'" #dt3></owl-date-time>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <a class="btn btn-warning btn-margin pull-right" (click)="onCancel()"> Back</a>
      <button class="btn btn-success pull-right btn-margin"><i class="fa fa-truck"></i> Transfer</button>
    </div>
  </div>
</form>
<div class="row">
  <div class="col-xs-12">
    <table class="row-border hover table table-condensed">
      <thead>
      <tr>
        <th> Destination</th>
        <th> Qty</th>
        <th> Date</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let org of parchment.destinationOrg">
        <ng-container>
          <td> {{ org.destinationOrg.name }}</td>
          <td> {{ org.transferredKgs }}</td>
          <td> {{ org.releaseDate | date }}</td>
        </ng-container>
      </tr>
      </tbody>
    </table>
  </div>
</div>
