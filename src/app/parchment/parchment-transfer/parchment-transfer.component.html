<div class="row">
  <div class="col-xs-12">
    <h3>
      Transfer parchment
    </h3>
  </div>
</div>
<app-list-message [message]="message"></app-list-message>
<app-list-errors [errorList]="errors"></app-list-errors>
<div class="row" style="margin-bottom: 15px;">
  <div class="col-xs-12">
    <form [formGroup]="transferLotsForm"  (ngSubmit)="onTransferLots()">
      <button class="btn btn-success pull-right btn-margin"><i class="fa fa-truck"></i> Transfer</button>
      <div class="form-inline pull-right">
        <label class="control-label">Destination</label> &nbsp; &nbsp;
        <select class="form-control" formControlName="destOrgId">
          <ng-container *ngFor="let organisation of organisations">
          <option *ngIf="organisation.organizationRole.includes(2)" value="{{organisation._id}}"> {{ organisation.organizationName }} </option>
          </ng-container>
        </select>
      </div>
      <div class="form-inline pull-right" style="margin-right: 15px">
        <label class="control-label">Release date</label> &nbsp; &nbsp;
        <input [owlDateTimeTrigger]="dt3" [owlDateTime]="dt3" formControlName="releaseDate" class="form-control">
        <owl-date-time [pickerType]="'calendar'" #dt3></owl-date-time>
      </div>
      <div class="form-inline pull-right" style="margin-right: 15px; margin-top: 6px">
        <label class="control-label">Qty</label> &nbsp; &nbsp;
        <span style="color: #367fa9">{{totalKgs }}</span>
        <span style="margin-left: 5px">Kgs</span>
      </div>
    </form>
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
    <div></div>
    <div class="box">
      <div class="box-body table-responsive">
        <table class="row-border hover table table-condensed">
          <thead>
          <tr>
            <th> </th>
            <th> Coffee type </th>
            <th> Qty </th>
            <th> Lot number </th>
            <th> Produced </th>
            <th> Released </th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let lot of parchment.lotInfo">
            <ng-container>
              <td> <input *ngIf="!lot.isReleased" type="checkbox" (click)="selectLot($event.target.checked, lot)"></td>
              <td> {{ parchment.coffeeType.name }} </td>
              <td> {{ lot.totalKgs }} </td>
              <td> {{ lot.lotNumber}} </td>
              <td> {{ lot.producedDate | date }} </td>
              <td> {{ lot.isReleased }}</td>
            </ng-container>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

