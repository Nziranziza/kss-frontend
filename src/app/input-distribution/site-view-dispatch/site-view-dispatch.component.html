<h3>
  Entries
</h3>
<app-list-message [message]="message"></app-list-message>
<app-list-errors [errorList]="errors"></app-list-errors>
<div class="row">
  <div class="col-xs-12">
    <div class="box">
      <div class="box-body expendable-dataTable">
        <app-loader *ngIf="loading"></app-loader>
        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover table table-striped">
          <thead>
          <tr>
            <th>Driver</th>
            <th>Vehicle</th>
            <th>Phone number</th>
            <th></th>
            <th>Date</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let dispatch of dispatches">
            <td>{{ dispatch.driverInfo.driver }}</td>
            <td>{{ dispatch.driverInfo.vehiclePlate }}</td>
            <td>{{ dispatch.driverInfo.driverPhoneNumber }}</td>
            <td>
              <table style="background: transparent; width: 750px;" class="pull-right">
                <tr style="font-style: oblique; font-size: 12px; background: transparent; font-weight: bold">
                  <td>Input</td>
                  <td>Items</td>
                  <td>Qty</td>
                  <td>Total</td>
                </tr>
                <tr *ngFor="let entry of dispatch.entries"
                    style="font-style: oblique; font-size: 12px; background: transparent">
                  <td>{{ entry.inputId.inputName }}</td>
                  <td>{{ entry.numberOfItems }}</td>
                  <td>{{ entry.quantityPerItem }}</td>
                  <td>{{ entry.numberOfItems * entry.quantityPerItem}}
                    <app-quantity-unit [inputType]="entry.inputId.inputType"></app-quantity-unit>
                  </td>
                </tr>
              </table>
            </td>
            <td>{{ dispatch.date|date }}</td>
            <td>
              <ng-container *ngIf="dispatch.receivedBy; else confirm">
                <button class="btn btn-info btn-margin btn-sm pull-right" (click)="printEntryNote(dispatch._id)"
                        type="button">
                  <i class="fa fa-print" aria-hidden="true"></i> Note
                </button>
                <span class="pull-right"><i class="fa fa-check-square" aria-hidden="true"></i> &nbsp; Confirmed</span>
              </ng-container>
              <ng-template #confirm>
                <button class="btn btn-success btn-margin btn-sm pull-right" (click)="confirmDispatch(dispatch)"
                        type="button">
                  <i class="fa fa-check-circle" aria-hidden="true"></i> Confirm
                </button>
              </ng-template>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

