<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6rJxA0WuYgN4LPaHcP8uLrgOQ-BUc_5A"></script>
<div class="filter-title-text">
  Welcome to SKS - <span class="bold"> Dashboard - Extension Services </span>
</div>
<form [formGroup]="dashboardForm">
  <div class="filter-box filter-box-top">
    <div class="row">
      <div class="col-md-12">
        <div class="row" formGroupName="location">
          <div
            class="col-xs-2"
            style="padding: 8px 10px 0px 10px; font-size: 18px"
          >
            <i
              class="fa fa-filter"
              aria-hidden="true"
              style="margin-left: 10px"
            ></i>
            <span style="font-size: 16px"> Filters </span>
          </div>
          <div class="col-xs-10">
            <div class="row">
              <div
                class="col-xs-2"
                id="location-province"
                style="padding: 8px 5px 0px 0px"
              >
                <div class="form-group">
                  <select
                    class="form-control form-control-small"
                    formControlName="prov_id"
                  >
                    <option value="" selected>All Provinces</option>
                    <option
                      *ngFor="let province of locationProvinces"
                      value="{{ province._id }}"
                    >
                      {{ province.namee | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div
                class="col-xs-2"
                id="location-district"
                style="padding: 8px 5px 0px 0px"
              >
                <div class="form-group">
                  <select
                    class="form-control form-control-small"
                    formControlName="dist_id"
                  >
                    <option value="" selected>All Districts</option>
                    <option
                      *ngFor="let district of locationDistricts"
                      value="{{ district._id }}"
                    >
                      {{ district.name | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-2" style="padding: 8px 5px 0 0px">
                <div class="ng-autocomplete">
                  <ng-autocomplete
                    #origin
                    [data]="organisations"
                    [searchKeyword]="keyword"
                    (selected)="selectEvent($event)"
                    (inputCleared)="deselectEvent()"
                    [initialValue]="initialValue"
                    placeholder="All Coffee Washing Stations"
                    [itemTemplate]="itemTemplate"
                    [notFoundTemplate]="notFoundTemplate"
                    style="height: 10px"
                  >
                  </ng-autocomplete>

                  <ng-template #itemTemplate let-item>
                    <a
                      [innerHTML]="item.organizationName"
                      style="height: 20px"
                    ></a>
                  </ng-template>

                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>
              <div class="col-xs-2" style="padding: 8px 5px 0 0px">
                <div class="form-group">
                  <select
                    class="form-control form-control-small"
                    formControlName="sect_id"
                  >
                    <option value="" selected>
                      All Covered Sectors
                    </option>
                    <option
                      *ngFor="let sector of coveredSectors; let i = index"
                      value="{{ sector?.sectorId._id }}"
                    >
                      {{ sector.sectorId.name ? sector.sectorId.name : sector.sectorId  | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-2" style="padding: 8px 5px 0 0px">
                <div class="form-group">
                  <input
                    [selectMode]="'range'"
                    [owlDateTimeTrigger]="dt8"
                    [owlDateTime]="dt8"
                    formControlName="filterByDate"
                    (change)="seasonDateChange('trainingFilters')"
                    class="form-control form-control-small"
                    placeholder="From: Dd/mm/yyyy ~ To: Dd/mm/yyyy"
                  />
                  <owl-date-time
                    [pickerType]="'calendar'"
                    [scrollStrategy]="scrollStrategy"
                    #dt8
                  ></owl-date-time>
                </div>
              </div>
              <div class="col-xs-2" style="padding: 8px 5px 0 5px">
                <button
                  class="btn btn-dashboard"
                  (click)="getStats('location')"
                >
                  FILTER
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="row"
    style="
      padding: 5px;
      background: #ffffff 0% 0% no-repeat padding-box;
      border-radius: 7px;
      opacity: 1;
    "
  >
    <div class="col-xs-5" style="padding: 0 0px 0 5px">
      <div
        style="
          min-height: 250px;
          background: #fff3e3 0% 0% no-repeat padding-box;
          padding: 5px;
          border-radius: 7px;
          margin-bottom: 10px;
        "
      >
        <h4 class="text-center">Training</h4>
        <div class="filter-box">
          <div class="row">
            <div class="col-xs-4" style="font-size: 20px">
              <i
                class="fa fa-filter"
                aria-hidden="true"
                style="margin-left: 5px"
              ></i>
              <span style="font-size: 16px"> Filter </span>
            </div>
            <div class="col-xs-6"></div>
            <div class="col-xs-2 text-center" style="font-size: 20px">
              <i
                class="fa fa-caret-down"
                aria-hidden="true"
                type="button"
                *ngIf="!trainingFilterEnabled"
                (click)="enableFilter(true, 'training')"
              ></i>
              <i
                class="fa fa-caret-up"
                aria-hidden="true"
                type="button"
                *ngIf="trainingFilterEnabled"
                (click)="enableFilter(false, 'training')"
              ></i>
            </div>
          </div>
          <span *ngIf="trainingFilterEnabled">
            <div
              class="row text-center"
              style="margin-left: 10px; margin-right: 15px; margin-bottom: 5px"
            >
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Select Training</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="training_id"
                  >
                    <option value="" selected>
                      All trainings
                    </option>
                    <option
                      *ngFor="let training of trainings; let i = index"
                      value="{{ training._id }}"
                    >
                      {{ training.trainingName | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Select Trainer</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="trainer_id"
                  >
                    <option value="" selected>All Trainers</option>
                    <option
                      *ngFor="let trainer of trainers; let i = index"
                      value="{{ trainer._id }}"
                    >
                      {{ trainer.foreName + " " + trainer.surname | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Select Group</label>
                  <div class="ng-autocomplete">
                    <ng-autocomplete
                      #origin
                      [data]="groups"
                      [searchKeyword]="groupKeyword"
                      (selected)="selectGroupEvent($event)"
                      (inputCleared)="deselectGroupEvent()"
                      [initialValue]="initialValue"
                      placeholder="All groups"
                      [itemTemplate]="itemTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      style="height: 10px"
                    >
                    </ng-autocomplete>

                    <ng-template #itemTemplate let-item>
                      <a [innerHTML]="item.groupName" style="height: 20px"></a>
                    </ng-template>

                    <ng-template #notFoundTemplate let-notFound>
                      <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
              </div>
              <span formGroupName="trainingFilters">
                <div class="col-xs-4 col-small-padding">
                  <div class="form-group">
                    <label class="label-header-text">Select Season</label>
                    <select
                      class="form-control form-control-small"
                      formControlName="season_id"
                      (change)="seasonChange('trainingFilters')"
                    >
                      <option value="" selected disabled>
                        Season {{ currentSeason?.season }}
                      </option>
                      <option
                        *ngFor="let season of seasons; let i = index"
                        value="{{ season.year }}"
                      >
                        {{ season.season | titlecase }}
                      </option>
                    </select>
                  </div>
                </div>

                <div class="col-xs-4 col-small-padding">
                  <div class="form-group">
                    <label class="label-header-text">Quarters</label>
                    <select
                      class="form-control form-control-small"
                      formControlName="quarterId"
                      (change)="seasonQuarterChange('trainingFilters')"
                    >
                      <option value="" selected>All Quaters</option>
                      <option
                        *ngFor="let quater of quarters; let i = index"
                        value="{{ quater.id }}"
                      >
                        {{ quater.name | titlecase }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-xs-4 col-small-padding">
                  <div class="form-group">
                    <label class="label-header-text">Date</label>
                    <input
                      [(ngModel)]="dateRange"
                      [selectMode]="'range'"
                      [owlDateTimeTrigger]="dt2"
                      [owlDateTime]="dt2"
                      formControlName="filterByDate"
                      (change)="seasonDateChange('trainingFilters')"
                      class="form-control form-control-small"
                      placeholder="From: Dd/mm/yyyy ~ To: Dd/mm/yyyy"
                      [min]="dateRangeMin['trainingFilters']"
                      [max]="dateRangeMax['trainingFilters']"
                    />
                    <owl-date-time
                      [pickerType]="'calendar'"
                      [scrollStrategy]="scrollStrategy"
                      #dt2
                    ></owl-date-time>
                  </div>
                </div>
              </span>
            </div>
          </span>
        </div>
        <div class="text-center">
          <p>Total Trainees</p>
          <h4>{{ trainingsStats.totalInvitees }}</h4>
        </div>

        <div
          class="row"
          style="margin-left: 15%; margin-right: 15%; margin-bottom: 5px"
        >
          <div class="col-xs-6">
            <div class="text-center trainees-box">
              <p>Attended</p>
              <h4>{{ trainingsStats.totalPresent }}</h4>
              <div class="row">
                <div class="col-xs-6">
                  <i
                    class="fa fa-male fa-2x"
                    aria-hidden="true"
                    style="color: #35a1ff"
                  ></i>
                  <p>{{ trainingsStats.malePresent }}</p>
                </div>
                <div class="col-xs-6">
                  <i
                    class="fa fa-female fa-2x"
                    aria-hidden="true"
                    style="color: #ff69f6"
                  ></i>
                  <p>{{ trainingsStats.femalePresent }}</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="text-center trainees-box trainees-box-absent">
              <p>Not Attended</p>
              <h4>{{ trainingsStats.totalAbsent }}</h4>
              <div class="row">
                <div class="col-xs-6">
                  <i
                    class="fa fa-male fa-2x"
                    aria-hidden="true"
                    style="color: #35a1ff"
                  ></i>
                  <p>{{ trainingsStats.maleAbsent }}</p>
                </div>
                <div class="col-xs-6">
                  <i
                    class="fa fa-female fa-2x"
                    aria-hidden="true"
                    style="color: #ff69f6"
                  ></i>
                  <p>{{ trainingsStats.femaleAbsent }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        style="
          min-height: 280px;
          padding: 5px;
          border-radius: 7px;
          background: #f2f2f2 0% 0% no-repeat padding-box;
          margin-bottom: 10px;
        "
      >
        <h4 class="text-center">Farms Visits</h4>
        <div class="filter-box">
          <div class="row">
            <div class="col-xs-4" style="font-size: 20px">
              <i
                class="fa fa-filter"
                aria-hidden="true"
                style="margin-left: 5px"
              ></i>
              <span style="font-size: 16px"> Filter </span>
            </div>
            <div class="col-xs-6"></div>
            <div class="col-xs-2 text-center" style="font-size: 20px">
              <i
                class="fa fa-caret-down"
                aria-hidden="true"
                type="button"
                *ngIf="!visitFilterEnabled"
                (click)="enableFilter(true, 'visit')"
              ></i>
              <i
                class="fa fa-caret-up"
                aria-hidden="true"
                type="button"
                *ngIf="visitFilterEnabled"
                (click)="enableFilter(false, 'visit')"
              ></i>
            </div>
          </div>
          <span *ngIf="visitFilterEnabled">
            <div
              class="row text-center"
              style="margin-left: 10px; margin-right: 15px; margin-bottom: 5px"
              formGroupName="visitFilters"
            >
              <div class="col-xs-4 col-small-padding">
                <label class="label-header-text">Select Season</label>
                <select
                  class="form-control form-control-small"
                  formControlName="season_id"
                  (change)="seasonChange('visitFilters')"
                >
                  <option value="" selected disabled>
                    Season {{ currentSeason?.season }}
                  </option>
                  <option
                    *ngFor="let season of seasons; let i = index"
                    value="{{ season.year }}"
                  >
                    {{ season.season | titlecase }}
                  </option>
                </select>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Quarters</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="quarterId"
                    (change)="seasonQuarterChange('visitFilters')"
                  >
                    <option value="" selected>All Quaters</option>
                    <option
                      *ngFor="let quater of quarters; let i = index"
                      value="{{ quater.id }}"
                    >
                      {{ quater.name | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Date</label>
                  <input
                    [(ngModel)]="dateRange"
                    [selectMode]="'range'"
                    [owlDateTimeTrigger]="dt3"
                    [owlDateTime]="dt3"
                    (change)="seasonDateChange('visitFilters')"
                    formControlName="filterByDate"
                    class="form-control form-control-small"
                    placeholder="From: Dd/mm/yyyy ~ To: Dd/mm/yyyy"
                    [min]="dateRangeMin['visitFilters']"
                    [max]="dateRangeMax['visitFilters']"
                  />
                  <owl-date-time
                    [pickerType]="'calendar'"
                    [scrollStrategy]="scrollStrategy"
                    #dt3
                  ></owl-date-time>
                </div>
              </div>
            </div>
          </span>
        </div>
        <div class="text-center">
          <p>Total Visited Farms</p>
          <h4>{{ visitStats.totalVisits }}</h4>
        </div>

        <div
          class="chart-visit-box"
          style="padding: 10px; margin-left: 5%; margin-right: 5%"
          *ngIf="visitStats.totalVisits > 0"
        >
          <span class="text-center">
            <div style="font: normal 16px Helvetica Neue">Visited Farmers</div>
            <div style="font: normal 20px Helvetica Neue">
              {{ visitStats.totalFarmersVisited }}
            </div>
          </span>
          <div class="row">
            <div class="col-xs-3 text-center">
              <br />
              <br />
              <i
                class="fa fa-female fa-3x"
                aria-hidden="true"
                style="color: #ff69f6"
              ></i>
              <p style="margin-left: 5px" class="text-center">
                {{ visitStats.femaleFarmVisits }}
              </p>
            </div>
            <div class="col-xs-6" style="margin-left: -75px; margin-top: -20px">
              <google-chart
                #chart
                [type]="graph.type"
                [data]="graph.data"
                [options]="graph.options"
                [width]="graph.width"
                [columns]="graph.columnNames"
                [height]="graph.height"
              >
              </google-chart>
            </div>
            <div class="col-xs-3 text-center" style="margin-left: 70px">
              <br />
              <br />
              <i
                class="fa fa-male fa-3x"
                aria-hidden="true"
                style="color: #35a1ff"
              ></i>
              <p style="margin-left: 5px">{{ visitStats.maleFarmVisits }}</p>
            </div>
          </div>
        </div>
      </div>

      <div
        style="
          min-height: 250px;
          padding: 5px;
          border-radius: 7px;
          background: #fff3e3 0% 0% no-repeat padding-box;
        "
      >
        <h4 class="text-center">Seedling Distribution</h4>
        <div class="filter-box">
          <div class="row">
            <div class="col-xs-4" style="font-size: 20px">
              <i
                class="fa fa-filter"
                aria-hidden="true"
                style="margin-left: 5px"
              ></i>
              <span style="font-size: 16px"> Filter </span>
            </div>
            <div class="col-xs-6"></div>
            <div class="col-xs-2 text-center" style="font-size: 20px">
              <i
                class="fa fa-caret-down"
                aria-hidden="true"
                type="button"
                *ngIf="!seedlingFilterEnabled"
                (click)="enableFilter(true, 'seedling')"
              ></i>
              <i
                class="fa fa-caret-up"
                aria-hidden="true"
                type="button"
                *ngIf="seedlingFilterEnabled"
                (click)="enableFilter(false, 'seedling')"
              ></i>
            </div>
          </div>
          <span *ngIf="seedlingFilterEnabled">
            <div
              class="row text-center"
              style="margin-left: 10px; margin-right: 15px; margin-bottom: 5px"
              formGroupName="seedlingFilters"
            >
              <div class="col-xs-3 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Select Nursery</label>
                  <div class="ng-autocomplete">
                    <ng-autocomplete
                      #origin
                      [data]="nurseries"
                      [searchKeyword]="nurseryKeyword"
                      (selected)="selectNurseryEvent($event)"
                      (inputCleared)="deselectNurseryEvent()"
                      [initialValue]="initialValue"
                      placeholder="All Nurseries"
                      [itemTemplate]="itemTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      style="height: 10px"
                    >
                    </ng-autocomplete>

                    <ng-template #itemTemplate let-item>
                      <a
                        [innerHTML]="item.nurseryName"
                        style="height: 20px"
                      ></a>
                    </ng-template>

                    <ng-template #notFoundTemplate let-notFound>
                      <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
              </div>
              <div class="col-xs-3 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Select Season</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="season_id"
                    (change)="seasonChange('seedlingFilters')"
                  >
                    <option value="" selected disabled>
                      Season {{ currentSeason?.season }}
                    </option>
                    <option
                      *ngFor="let season of seasons; let i = index"
                      value="{{ season.year }}"
                    >
                      {{ season.season | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-3 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Quarters</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="quarterId"
                    (change)="seasonQuarterChange('seedlingFilters')"
                  >
                    <option value="" selected>All Quaters</option>
                    <option
                      *ngFor="let quater of quarters; let i = index"
                      value="{{ quater.id }}"
                    >
                      {{ quater.name | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-3 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Date</label>
                  <input
                    [(ngModel)]="dateRange"
                    [selectMode]="'range'"
                    [owlDateTimeTrigger]="dt3"
                    [owlDateTime]="dt3"
                    formControlName="filterByDate"
                    (change)="seasonDateChange('seedlingFilters')"
                    class="form-control form-control-small"
                    placeholder="From: Dd/mm/yyyy ~ To: Dd/mm/yyyy"
                    [min]="dateRangeMin['visitFilters']"
                    [max]="dateRangeMax['visitFilters']"
                  />
                  <owl-date-time
                    [pickerType]="'calendar'"
                    [scrollStrategy]="scrollStrategy"
                    #dt3
                  ></owl-date-time>
                </div>
              </div>
            </div>
          </span>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="text-center">
              <p>Seedling Distributed</p>
              <h4>{{ totalSeedlings }}</h4>
            </div>
            <div class="text-center" *ngFor="let seedling of seedlingStats">
              <p>{{ seedling.variety }}</p>
              <h4>{{ seedling.totalQuantity }}</h4>
            </div>
          </div>
          <div class="col-xs-6">
            <div
              class="text-center"
              style="margin-top: -15px; margin-left: -85px"
              *ngIf="totalSeedlings > 0"
            >
              <google-chart
                #chart2
                [type]="graph.type"
                [data]="seedlingGraph.data"
                [options]="seedlingGraph.options"
                [width]="graph.width"
                [columns]="seedlingGraph.columnNames"
                [height]="graph.height"
              >
              </google-chart>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xs-7" style="padding: 0 5px 0 12px">
      <div
        style="
          background: #f0f0f0 0% 0% no-repeat padding-box;
          padding: 5px;
          border-radius: 7px;
          min-height: 580px;
          margin-bottom: 10px;
        "
      >
        <h4 class="text-center">Farms</h4>
        <div
          class="farm-graph-popup"
          *ngIf="!clickedMarker"
          style="margin-bottom: 5px"
        >
          <div class="row text-center">
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Total Farms</h4>
              <h3>{{ farms.length }}</h3>
            </div>
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Total Visits</h4>
              <h3>{{ visitStats.totalVisits }}</h3>
            </div>
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Total Farmers</h4>
              <h3>{{ farms.length }}</h3>
            </div>
            <div class="col-xs-3" style="padding: 0 5px 0 0px">
              <h4>Total Trees</h4>
              <h3>000</h3>
            </div>
          </div>
        </div>
        <div
          class="farm-graph-popup"
          *ngIf="clickedMarker"
          style="margin-bottom: 5px"
        >
          <div class="row text-center">
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Owner</h4>
              <h6>
                {{
                  farmDetails?.user.foreName + " " + farmDetails?.user.surname
                }}
              </h6>
            </div>
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Upi Number</h4>
              <h6>{{ farmDetails?.farm?.requestInfo.upiNumber }}</h6>
            </div>
            <div class="col-xs-3" style="padding: 0 2px 0 0px">
              <h4>Trees</h4>
              <h4>{{ farmDetails?.farm?.requestInfo.numberOfTrees }}</h4>
            </div>
            <div class="col-xs-3" style="padding: 0 5px 0 0px">
              <h4>Visits</h4>
              <h4>0</h4>
            </div>
          </div>
        </div>
        <google-map
          [options]="mapOptions"
          width="100%"
          height="505px"
          *ngIf="farms.length > 0"
        >
          <map-marker
            *ngFor="let farm of farms"
            [position]="{ lat: farm.lat, lng: farm.lng }"
            [options]="markerOptions"
            [clickable]="true"
            (mapClick)="selectMarker(farm.id)"
          ></map-marker>
        </google-map>
      </div>
      <div
        style="
          padding: 5px;
          min-height: 330px;
          background: #f2f2f2 0% 0% no-repeat padding-box;
          border-radius: 7px;
        "
      >
        <h4 class="text-center">GAP Adoption</h4>
        <div class="filter-box" style="margin-left: 20%; margin-right: 20%">
          <div class="row">
            <div class="col-xs-4" style="font-size: 20px">
              <i
                class="fa fa-filter"
                aria-hidden="true"
                style="margin-left: 5px"
              ></i>
              <span style="font-size: 16px"> Filter </span>
            </div>
            <div class="col-xs-6"></div>
            <div class="col-xs-2 text-center" style="font-size: 20px">
              <i
                class="fa fa-caret-down"
                aria-hidden="true"
                type="button"
                *ngIf="!gapFilterEnabled"
                (click)="enableFilter(true, 'gap')"
              ></i>
              <i
                class="fa fa-caret-up"
                aria-hidden="true"
                type="button"
                *ngIf="gapFilterEnabled"
                (click)="enableFilter(false, 'gap')"
              ></i>
            </div>
          </div>
          <span *ngIf="gapFilterEnabled">
            <div
              class="row text-center"
              style="margin-left: 10px; margin-right: 15px; margin-bottom: 5px"
              formGroupName="gapFilters"
            >
              <div class="col-xs-4 col-small-padding">
                <label class="label-header-text">Select Season</label>
                <select
                  class="form-control form-control-small"
                  formControlName="season_id"
                  (change)="seasonChange('gapFilters')"
                >
                  <option value="" selected disabled>
                    Season {{ currentSeason?.season }}
                  </option>
                  <option
                    *ngFor="let season of seasons; let i = index"
                    value="{{ season.year }}"
                  >
                    {{ season.season | titlecase }}
                  </option>
                </select>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Quarters</label>
                  <select
                    class="form-control form-control-small"
                    formControlName="quarterId"
                    (change)="seasonQuarterChange('gapFilters')"
                  >
                    <option value="" selected>All Quaters</option>
                    <option
                      *ngFor="let quater of quarters; let i = index"
                      value="{{ quater.id }}"
                    >
                      {{ quater.name | titlecase }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xs-4 col-small-padding">
                <div class="form-group">
                  <label class="label-header-text">Date</label>
                  <input
                    [(ngModel)]="dateRange"
                    [selectMode]="'range'"
                    [owlDateTimeTrigger]="dt5"
                    [owlDateTime]="dt5"
                    formControlName="filterByDate"
                    (change)="seasonDateChange('gapFilters')"
                    class="form-control form-control-small"
                    placeholder="From: Dd/mm/yyyy ~ To: Dd/mm/yyyy"
                    [min]="dateRangeMin.gapFilters"
                    [max]="dateRangeMax.gapFilters"
                  />
                  <owl-date-time
                    [pickerType]="'calendar'"
                    [scrollStrategy]="scrollStrategy"
                    #dt5
                  ></owl-date-time>
                </div>
              </div>
            </div>
          </span>
        </div>
        <div
          style="margin-bottom: 2px; margin-left: 10px; margin-right: 20px"
          *ngFor="let gapAdoption of gapAdoptionStats; let i = index"
        >
          <div
            class="progress-bar"
            [ngStyle]="{
              width: gapAdoption ? gapAdoption.baselineRate + 10 + '%' : '0%',
              height: '7px',
              background: '#3DE327 0% 0% no-repeat padding-box',
              display: block
            }"
          ></div>
          <div style="margin-bottom: 2px; height: 6px"></div>
          <div
            class="progress-bar"
            [ngStyle]="{
              width: gapAdoption ? gapAdoption.adoptionRate + '%' : '0%',
              height: '7px',
              background: '#4f210d 0% 0% no-repeat padding-box'
            }"
          ></div>
          <div class="row">
            <div class="col-xs-10" style="margin-top: -5px">
              <h4>{{ i + 1 }}. {{ gapAdoption.gap_name?.toLowerCase() }}</h4>
            </div>
            <div class="col-xs-1" style="padding: 0 2px 0 0px">
              <div
                class="text-center"
                style="
                  background: #3de327 0% 0% no-repeat padding-box;
                  border-radius: 5px;
                  opacity: 1;
                  margin-top: 1px;
                "
              >
                <div style="font: normal 8px Helvetica Neue">Baseline</div>
                <div style="font: normal 13px Helvetica Neue">
                  {{ gapAdoption.baselineRate + 10 | number: "1.1-1" }}%
                </div>
              </div>
            </div>
            <div class="col-xs-1" style="padding: 0 2px 0 2px">
              <div
                class="text-center"
                style="
                  background: #ffffff 0% 0% no-repeat padding-box;
                  border-radius: 5px;
                  opacity: 1;
                  margin-top: 1px;
                "
              >
                <div style="font: normal 8px Helvetica Neue">Score</div>
                <div style="font: normal 13px Helvetica Neue">
                  {{ gapAdoption.adoptionRate | number: "1.1-1" }}%
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
