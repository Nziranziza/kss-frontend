<ng-template #ccontent let-modal>
  <div class="modal-body text-center" style="font-size: 1.5em">
    <i class="fa fa-check" style="color: #00a513; font-size: 4.5em"></i>
    <br />
    Thank you Training <br />
    <span style="font-weight: bold">
      “ {{ createTraining.value.trainingName }} “
    </span>
    <br />
    has been added <br />
    <button
      type="button"
      class="btn btn-success btn-lg pull-center"
      routerLink="/admin/training/list"
      (click)="modal.dismiss()"
    >
      OK
    </button>
  </div>
</ng-template>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title training-modal-title" id="modal-basic-title">
      Verify and Confirm
    </h4>
  </div>
  <div class="modal-body">
    <div class="box">
      <div class="box-body">
        <h3>Training details</h3>
        <div class="row">
          <div class="col-xs-6">
            <div style="margin-bottom: 10px">
              <label class="control-label label-required">Training Name</label>
              <div class="confirm-text-box confirm-text">
                {{ createTraining.value.trainingName }}
              </div>
            </div>
            <div>
              <label class="control-label label-required">Associated GAP</label>
              <div class="confirm-text-box confirm-text">
                <li
                  *ngFor="
                    let gaps of createTraining.value.adoptionGap;
                    let i = index
                  "
                >
                  {{ gaps.name }}
                </li>
              </div>
            </div>
            <div>
              <label class="control-label label-required">Status</label>
              <div class="confirm-text-box confirm-text">
                {{ createTraining.value.status }}
              </div>
            </div>
          </div>
          <div class="col-xs-6">
            <div>
              <label class="control-label label-required"
                >Training Description</label
              >
              <div class="confirm-text-box confirm-text">
                {{ createTraining.value.description }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="box" class="background: #EDEAE8 0% 0% no-repeat padding-box">
      <app-loader *ngIf="loading"></app-loader>
      <div class="box-body" *ngIf="!loading">
        <h3>Files</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Filename</th>
              <th>File Size</th>
            </tr>
          </thead>

          <tbody *ngFor="let file of files; let i = index">
            <tr>
              <td>{{ i + 1 }}</td>
              <td>{{ file.name }}</td>
              <td>{{ file.size }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="row">
      <div class="col-sm-3">
        <button
          type="button"
          class="btn btn-danger btn-lg pull-left"
          (click)="modal.dismiss()"
        >
          Cancel
        </button>
      </div>
      <div class="col-sm-6"></div>
      <div class="col-sm-3">
        <button
          class="btn btn-secondary btn-lg submit"
          (click)="modal.dismiss(); onSubmit(); open(ccontent)"
          [disabled]="loading"
        >
          <span *ngIf="!loading; else other_content">Confirm</span>
          <ng-template #other_content>
            <div class="loader">
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
            </div>
          </ng-template>
        </button>
      </div>
    </div>
  </div>
</ng-template>
<h3>
  {{ "training_management" | translate }} >
  <span style="font-weight: bold"> {{ "add_training" | translate }} </span>
</h3>
<app-list-message [message]="message"></app-list-message>
<app-list-errors [errorList]="errors"></app-list-errors>
<form [formGroup]="createTraining" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-body">
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label class="control-label label-required">{{
                  "training_name" | translate
                }}</label>
                <input
                  type="text"
                  formControlName="trainingName"
                  class="form-control"
                />
                <app-inline-errors
                  *ngIf="
                    createTraining.controls.trainingName.invalid &&
                    (createTraining.controls.trainingName.dirty ||
                      createTraining.controls.trainingName.touched)
                  "
                  [errors]="createTraining.controls.trainingName.errors"
                  [label]="'training_name'"
                >
                </app-inline-errors>
              </div>
            </div>
            <div
              class="col-sm-6"
              *ngIf="createTraining.value.trainingName != ''"
            >
              <div class="form-group">
                <label class="control-label label-required">{{
                  "training_description" | translate
                }}</label>
                <input
                  type="text"
                  formControlName="description"
                  class="form-control"
                />
                <app-inline-errors
                  *ngIf="
                    createTraining.controls.description.invalid &&
                    (createTraining.controls.description.dirty ||
                      createTraining.controls.description.touched)
                  "
                  [errors]="createTraining.controls.description.errors"
                  [label]="'description'"
                >
                </app-inline-errors>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="createTraining.value.trainingName != ''">
            <div class="col-sm-6">
              <div class="form-group">
                <label class="control-label label-required">{{
                  "associated_gap" | translate
                }}</label>

                <ng-multiselect-dropdown
                  formControlName="adoptionGap"
                  [settings]="gapDropdownSettings"
                  [data]="gaps"
                  [(ngModel)]="createTraining.value.adoptionGap"
                  (onSelect)="onGapSelect($event)"
                >
                </ng-multiselect-dropdown>

                <app-inline-errors
                  *ngIf="
                    createTraining.controls.adoptionGap.invalid &&
                    (createTraining.controls.adoptionGap.dirty ||
                      createTraining.controls.adoptionGap.touched)
                  "
                  [errors]="createTraining.controls.adoptionGap.errors"
                  [label]="'adoption_gap'"
                >
                </app-inline-errors>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="control-label label-required">{{
                  "attach_files" | translate
                }}</label>
                <label for="file-input" class="training-file-input">
                  <img
                    src="assets/dist/img/sks/ico_export.svg"
                    class="training-file-input-icon"
                  />
                  <div class="training-file-input-text">
                    {{ "click_drag_pdf_file" | translate }}
                  </div>
                </label>
                <input
                  id="file-input"
                  type="file"
                  multiple
                  class="form-control"
                  style="display: none"
                  (change)="onFileSelected($event)"
                  accept="application/pdf"
                />
                <div class="training-file-list">
                  Attached file(s) to upload <br /><br />
                  <div
                    *ngFor="let file of files; let i = index"
                    style="padding-bottom: 6px"
                  >
                    <span style="width: 75%; float: left">
                      <img
                        src="assets/dist/img/sks/ico_attach.svg"
                        style="margin-right: 5px"
                      />
                      {{ file.name }}
                    </span>
                    <span style="margin-left: 40px; width: 12%; float: left">
                      {{ file.size }}
                    </span>
                    <i
                      class="fa fa-times"
                      aria-hidden="true"
                      (click)="removeSelectedFile(index)"
                      style="color: red"
                    ></i>
                    <br />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center" *ngIf="createTraining.value.trainingName != ''">
    <button
      type="button"
      class="btn btn-success"
      style="width: 250px; height: 50px; margin-right: 10px"
      routerLink="/admin/training/list"
    >
      {{ "cancel" | translate }}
    </button>
    <button
      type="button"
      class="btn btn-success"
      (click)="onFileUpload(content)"
      style="width: 250px; height: 50px"
    >
      {{ "add_training" | translate }}
    </button>
  </div>
</form>
